<!DOCTYPE html>
<html lang="ms">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1.0"/>
  <title>Masuk ke Lancar.my</title>
  <link rel="stylesheet" href="styles.css"/>
</head>
<body>
  <main class="hero">
    <h2>Masuk ke Lancar.my</h2>
    <p>Masukkan e-mel & kata laluan anda untuk akses dashboard.</p>
    <input type="email" id="email" placeholder="you@domain.com"
           style="padding:.5rem;width:250px;margin-right:1rem;"/>
    <input type="password" id="password" placeholder="Kata laluan"
           style="padding:.5rem;width:250px;margin-right:1rem;"/>
    <button id="login-btn" class="btn-primary">Masuk</button>
    <p id="msg" style="color:red;margin-top:1rem;"></p>
  </main>

  <script type="module">
    import { createClient }
      from 'https://cdn.jsdelivr.net/npm/@supabase/supabase-js/+esm';

    const SUPABASE_URL      = 'https://<YOUR_PROJECT>.supabase.co';
    const SUPABASE_ANON_KEY = '<YOUR_ANON_KEY>';
    const supabase = createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

    const emailIn = document.getElementById('email');
    const passIn  = document.getElementById('password');
    const btn     = document.getElementById('login-btn');
    const msgP    = document.getElementById('msg');

    // Prefill email from query?
    const params = new URLSearchParams(location.search);
    if (params.get('email')) {
      emailIn.value = params.get('email');
    }

    btn.onclick = async () => {
      const email = emailIn.value.trim();
      const pass  = passIn.value;
      if (!email||!pass) {
        return msgP.textContent = 'Sila lengkapkan e-mel & kata laluan.';
      }
      const { data, error } = await supabase.auth.signInWithPassword({
        email, password: pass
      });
      if (error) {
        msgP.textContent = error.message;
      } else {
        // berjaya â†’ dashboard
        location.href = `dashboard.html`;
      }
    };
  </script>
</body>
</html>
